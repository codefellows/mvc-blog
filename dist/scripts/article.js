!function(t){function n(t){this.author=t.author,this.authorUrl=t.authorUrl,this.title=t.title,this.category=t.category,this.body=t.body,this.publishedOn=t.publishedOn}n.all=[],n.prototype.toHtml=function(){var t=Handlebars.compile($("#article-template").text());return this.daysAgo=parseInt((new Date-new Date(this.publishedOn))/60/60/24/1e3),this.publishStatus=this.publishedOn?"published "+this.daysAgo+" days ago":"(draft)",this.body=marked(this.body),t(this)},n.loadAll=function(t){t.sort(function(t,n){return new Date(n.publishedOn)-new Date(t.publishedOn)}),t.forEach(function(t){n.all.push(new n(t))}),n.all=t.map(function(t){return new n(t)})},n.fetchAll=function(){localStorage.rawData?(n.loadAll(JSON.parse(localStorage.rawData)),articleView.initIndexPage()):$.getJSON("/data/hackerIpsum.json",function(t){n.loadAll(t),localStorage.rawData=JSON.stringify(t),articleView.initIndexPage()})},n.fetchAll=function(t){localStorage.rawData?(n.loadAll(JSON.parse(localStorage.rawData)),t()):$.getJSON("/data/hackerIpsum.json",function(a){n.loadAll(a),localStorage.rawData=JSON.stringify(a),t()})},n.allAuthors=function(){return n.all.map(function(t){return t.author}).reduce(function(t,n){return-1===t.indexOf(n)&&t.push(n),t},[])},n.numWordsAll=function(){return n.all.map(function(t){return t.body.match(/\b\w+/g).length}).reduce(function(t,n){return t+n})},n.numWordsByAuthor=function(){return n.allAuthors().map(function(t){return{name:t,numWords:n.all.filter(function(n){return n.author===t}).map(function(t){return t.body.match(/\b\w+/g).length}).reduce(function(t,n){return t+n})}})},n.stats=function(){return{numArticles:n.all.length,numWords:n.numwords(),Authors:n.allAuthors()}},t.Article=n}(window);