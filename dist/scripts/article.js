function Article(t){this.author=t.author,this.authorUrl=t.authorUrl,this.title=t.title,this.category=t.category,this.body=t.body,this.publishedOn=t.publishedOn}Article.all=[],Article.prototype.toHtml=function(){var t=Handlebars.compile($("#article-template").text());return this.daysAgo=parseInt((new Date-new Date(this.publishedOn))/60/60/24/1e3),this.publishStatus=this.publishedOn?"published "+this.daysAgo+" days ago":"(draft)",this.body=marked(this.body),t(this)},Article.loadAll=function(t){t.sort(function(t,e){return new Date(e.publishedOn)-new Date(t.publishedOn)}),t.forEach(function(t){Article.all.push(new Article(t))})},Article.fetchAll=function(){localStorage.rawData?(Article.loadAll(JSON.parse(localStorage.rawData)),articleView.initIndexPage()):$.getJSON("/data/hackerIpsum.json",function(t){Article.loadAll(t),localStorage.rawData=JSON.stringify(t),articleView.initIndexPage()})},Article.fetchAll=function(){localStorage.rawData?$.ajax({type:"HEAD",url:"/data/hackerIpsum.json",success:function(t,e,a){console.log(a);var l=a.getResponseHeader("eTag");localStorage.eTag&&l===localStorage.eTag?(Article.loadAll(JSON.parse(localStorage.rawData)),articleView.initIndexPage()):(localStorage.eTag=l,Article.getAll())}}):Article.getAll()},Article.getAll=function(){$.getJSON("/data/hackerIpsum.json",function(t){Article.loadAll(t),localStorage.rawData=JSON.stringify(t),articleView.initIndexPage()})};