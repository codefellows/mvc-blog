!function(e){var t={},a=function(e){var t=Handlebars.compile($("#article-template").text());return e.daysAgo=parseInt((new Date-new Date(e.publishedOn))/60/60/24/1e3),e.publishStatus=e.publishedOn?"published "+e.daysAgo+" days ago":"(draft)",e.body=marked(e.body),t(e)};t.populateFilters=function(){var e,t=Handlebars.compile($("#option-template").text());e=Article.allAuthors().map(function(e){return t({val:e})}),$("#author-filter option").length>0&&$("#author-filter").append(e),Article.allCategories(function(e){$("#category-filter option").length>0&&$("#category-filter").append(e.map(function(e){return t({val:e.category})}))})},t.handleFilters=function(){$("#filters").one("change","select",function(){resource=this.id.replace("-filter",""),page("/"+resource+"/"+$(this).val().replace(/\W+/g,"+"))})},t.initNewArticlePage=function(){$("#articles").show().siblings().hide(),$("#export-field").hide(),$("#article-json").on("focus",function(){this.select()}),$("#new-form").on("change","input, textarea",t.create)},t.create=function(){var e;$("#articles").empty(),e=new Article({title:$("#article-title").val(),author:$("#article-author").val(),authorUrl:$("#article-author-url").val(),category:$("#article-category").val(),body:$("#article-body").val(),publishedOn:$("#article-published:checked").length?util.today():null}),$("#articles").append(a(e)),$("pre code").each(function(e,t){hljs.highlightBlock(t)}),$("#export-field").show(),$("#article-json").val(JSON.stringify(e)+",")},t.index=function(e){$("#articles").show().siblings().hide(),$("#articles article").remove(),e.forEach(function(e){$("#articles").append(a(e))}),t.populateFilters(),t.handleFilters(),$("#articles article").length>1&&$(".article-body *:nth-of-type(n+2)").hide()},t.initAdminPage=function(){var e=Handlebars.compile($("#author-template").text());Article.numWordsByAuthor().forEach(function(t){$(".author-stats").append(e(t))}),$("#blog-stats .articles").text(Article.all.length),$("#blog-stats .words").text(Article.numWordsAll())},e.articleView=t}(window);